<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>CyberSecure LMS | My Dashboard</title>
  <link rel="stylesheet" href="/css/styles.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>

<body>
  <!-- NAVBAR -->
  <nav>
    <div>üìä CyberSecure LMS (Dashboard)</div>
    <div id="nav-links"></div>
    <div id="nav-user"></div>
  </nav>

  <div class="container">
    <!-- ADMIN DASHBOARD -->
    <div id="admin-dashboard" style="display:none;">
      <h2>Admin Dashboard</h2>
      <p style="font-size:14px;color:#9ca3af;">
        Manage AI-generated courses and view system overview.
      </p>

      <hr />

      <!-- ADMIN STATS -->
      <section>
        <h3>System Overview</h3>
        <div id="admin-stats" style="display:flex;flex-wrap:wrap;gap:12px;margin-top:10px;">
          <div class="card" style="flex:1;min-width:180px;">
            <h4>Total Courses</h4>
            <p id="admin-total-courses" style="font-size:24px;font-weight:bold;color:#2563eb;">-</p>
          </div>
        </div>
      </section>

      <hr style="margin:24px 0;" />

      <!-- COURSES LIST -->
      <section>
        <h3>AI-Generated Courses</h3>
        <p style="font-size:14px;color:#9ca3af;margin-bottom:10px;">
          All courses are powered by AI and automatically generated from question categories.
        </p>
        <div id="courses-list" style="margin-top:10px;">
          <!-- Filled by dashboard.js -->
        </div>
        <p id="courses-error" style="color:#ff6b6b;margin-top:8px;"></p>
      </section>
    </div>

    <!-- LEARNER DASHBOARD -->
    <div id="learner-dashboard">
      <h2>My Learning Dashboard</h2>
      <p style="font-size:14px;color:#9ca3af;">
        Track your progress, identify weak areas, and see your improvement over time.
      </p>

      <hr />

    <!-- OVERALL STATS -->
    <section>
      <h3>Overall Performance</h3>
      <div id="overall-stats" style="display:flex;flex-wrap:wrap;gap:12px;margin-top:10px;">
        <div class="card" style="flex:1;min-width:180px;">
          <h4>Total Sessions</h4>
          <p id="stat-total-sessions" style="font-size:24px;font-weight:bold;color:#2563eb;">-</p>
        </div>

        <div class="card" style="flex:1;min-width:180px;">
          <h4>Questions Answered</h4>
          <p id="stat-total-questions" style="font-size:24px;font-weight:bold;color:#2563eb;">-</p>
        </div>

        <div class="card" style="flex:1;min-width:180px;">
          <h4>Correct Answers</h4>
          <p id="stat-total-correct" style="font-size:24px;font-weight:bold;color:#4ade80;">-</p>
        </div>

        <div class="card" style="flex:1;min-width:180px;">
          <h4>Overall Accuracy</h4>
          <p id="stat-accuracy" style="font-size:24px;font-weight:bold;color:#f59e0b;">-</p>
        </div>

        <div class="card" style="flex:1;min-width:180px;">
          <h4>Active Sessions</h4>
          <p id="stat-active-sessions" style="font-size:24px;font-weight:bold;color:#8b5cf6;">-</p>
        </div>
      </div>
    </section>

    <hr style="margin:24px 0;" />

    <!-- CURRENT SESSION -->
    <section id="current-session-section" style="display:none;">
      <h3>Current Training Session</h3>
      <div class="card" style="margin-top:10px;">
        <p><strong>Questions in Session:</strong> <span id="current-session-asked">-</span></p>
        <p><strong>Correct:</strong> <span id="current-session-correct">-</span></p>
        <p><strong>Accuracy:</strong> <span id="current-session-accuracy">-</span>%</p>
        <p><strong>Current Difficulty:</strong> <span id="current-session-difficulty">-</span></p>
        <p><strong>Correct Streak:</strong> <span id="current-session-streak">-</span></p>
        <a href="/chat.html" class="btn-primary" style="display:inline-block;margin-top:8px;">Continue Training ‚Üí</a>
      </div>
    </section>

    <hr style="margin:24px 0;" />

    <!-- CHARTS -->
    <section>
      <h3>Performance Charts</h3>
      <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(400px, 1fr));gap:20px;margin-top:10px;">
        <!-- Accuracy Chart -->
        <div class="card">
          <h4>Category Performance</h4>
          <canvas id="category-chart" style="max-height:300px;"></canvas>
        </div>

        <!-- Difficulty Progression -->
        <div class="card">
          <h4>Difficulty Progression</h4>
          <canvas id="difficulty-chart" style="max-height:300px;"></canvas>
        </div>
      </div>
    </section>

    <hr style="margin:24px 0;" />

    <!-- CATEGORY BREAKDOWN -->
    <section>
      <h3>Performance by Category</h3>
      <div id="category-list" style="margin-top:10px;">
        <!-- Filled by dashboard.js -->
      </div>
      <p id="category-error" style="color:#ff6b6b;margin-top:8px;"></p>
    </section>

    <hr style="margin:24px 0;" />

    <!-- WEAK AREAS -->
    <section id="weak-areas-section" style="display:none;">
      <h3>‚ö†Ô∏è Areas Needing Improvement</h3>
      <div id="weak-areas-list" class="card" style="margin-top:10px;background:#fef2f2;">
        <!-- Filled by dashboard.js -->
      </div>
    </section>

    <hr style="margin:24px 0;" />

    <!-- RECENT SESSIONS -->
    <section>
      <h3>Recent Training Sessions</h3>
      <div id="recent-sessions" style="margin-top:10px;">
        <!-- Filled by dashboard.js -->
      </div>
      <p id="sessions-error" style="color:#ff6b6b;margin-top:8px;"></p>
    </section>
    </div>
  </div>

  <!-- SCRIPTS -->
  <script src="/js/api.js"></script>
  <script src="/js/auth.js"></script>
  <script src="/js/dashboard.js"></script>
</body>
</html>

